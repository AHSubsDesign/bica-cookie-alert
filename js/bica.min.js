var bica=function(n,t,o,e,i){function a(){if(7!=g.bgColor.length)return s(["HEX too short",g.bgColor],"error"),g.bgColor;var n=c(g.bgColor);return n.push(g.bgOpacity),"rgba("+n.join(",")+")"}function r(){var t="js/bica.js",o=n('script[src$="'+t+'"]')[0].src;return o.replace(t,"")}function s(n,o){o=o||"info",n="["+e.toUpperCase()+"]: "+n,t.console&&t.console[o]?console[o](n):alert(n)}function c(n){var t=parseInt(n.substring(1),16),o=(16711680&t)>>16,e=(65280&t)>>8,i=255&t;return[o,e,i]}function l(n){var t=new Date;t.setTime(t.getTime()+864e5*n.days),o.cookie=n.name+"="+n.value+"; expires="+t.toUTCString()+"; path=/"}function d(n){var t=o.cookie.split(";");n+="=";for(var e=0;e<t.length;e++){for(var a=t[e];" "==a.charAt(0);)a=a.substring(1);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return i}var f,u=n(t),g={},b={initialized:!1,defaultLang:"en",translations:{},root:r(),cookie:{name:e,value:"is_approved",days:"730"},minFontSize:12},h={style:"inline",txtColor:"#000",btnTxtColor:"#fff",btnBgBackgrund:"#666",bgColor:"#ffffff",bgOpacity:.9,lang:o.documentElement.lang||b.defaultLang,showAfter:1200,useStylesheet:!0,infoUrl:i},v=function(){},p=function(t){return b.initialized?s("Re-init not allowed"):(g=n.extend({},h,t),void(d(b.cookie.name)!=b.cookie.value?u.trigger("bica-ready"):v()))},m=function(){n.getJSON(b.root+"i18n/"+g.lang+".json",function(n){b.translations=n[g.lang],"OK"==n.status?u.trigger("bica-trans-loaded"):s("Translation jsonâ€™s not-well-formatted")})},y=function(){g.useStylesheet&&n("head").append(n('<link rel="stylesheet" type="text/css"/>').attr("href",b.root+"css/cookie.css")),f=n("<div/>",{id:e,"class":e}).css({background:a(),color:g.txtColor}).load(b.root+"/view/disclaimer.html",function(){u.trigger("bica-view-loaded")}).prependTo("body")},k=function(){n("[data-trans]").each(function(){this.innerHTML=b.translations[this.attributes["data-trans"].value]})},C=function(){f.find('[data-action="dismiss"]').on("click",function(){f.fadeOut("fast"),l(b.cookie)}),f.find('[data-action="info"]').on("click",function(){t.location.href=g.infoUrl})},w=function(){f.addClass(e+"-"+g.style),f.find('[data-role="button"]').css({color:g.btnTxtColor,background:g.btnBgBackgrund}),g.infoUrl===i&&f.find('[data-action="info"]').remove(),f.css({fontSize:Math.max(parseInt(f.css("fontSize"),10),b.minFontSize)})};return u.on("bica-ready",function(){b.initialized=!0,m()}),u.on("bica-trans-loaded",y),u.on("bica-view-loaded",function(){C(),w(),k(),f.delay(g.showAfter).slideDown("medium")}),{init:p,destroy:v}}(jQuery,window,document,"bica");